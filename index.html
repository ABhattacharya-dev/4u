<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4U</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400&display=swap');
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <style>
        /* --- GLOBAL & MANGA STYLES --- */
        :root {
            --bg-color: #050505;
            --text-color: #f0f0f0;
            --panel-border: 2px solid #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Montserrat", sans-serif;
            overflow-x: hidden;
            width: 100%;
        }

        /* Prevent Tailwind preflight from killing GSAP markers or specific styles if needed */
        h1, h2, h3, h4, h5, h6 { font-size: inherit; font-weight: inherit; }

        html.lenis, body.lenis { height: auto; }

        /* INTRO */
        .intro-section {
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 10;
        }
        .intro-content { text-align: center; }
        .intro-title { font-weight: 200; font-size: 3rem; letter-spacing: -1px; margin-bottom: 1rem; }
        .sub-text { font-weight: 300; font-size: 1rem; color: #888; text-transform: uppercase; letter-spacing: 2px; }
        .scroll-indicator { position: absolute; bottom: 40px; font-size: 0.8rem; opacity: 0.6; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }

        /* MANGA GRID */
        .story-container {
            position: relative;
            width: 100%;
            height: 500vh; 
            background-color: var(--bg-color);
        }
        .sticky-wrapper {
            position: sticky;
            top: 0;
            height: 100vh;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .manga-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            width: 90vw;
            height: 60vh;
            max-width: 800px;
            opacity: 0;
            transform: scale(0.95);
        }
        .panel {
            background: #1a1a1a;
            border: var(--panel-border);
            overflow: hidden;
            opacity: 0;
            filter: grayscale(100%);
            transition: filter 0.3s ease;
        }
        .panel.active { filter: grayscale(0%); box-shadow: 0 0 15px rgba(255,255,255,0.1); }
        .panel img { width: 100%; height: 100%; object-fit: cover; display: block; }
        
        .caption-area {
            position: absolute; bottom: 10%; width: 100%; text-align: center; display: flex; justify-content: center; pointer-events: none; z-index: 20;
        }
        .caption-text {
            font-family: "Comic Neue", cursive; font-size: 1.1rem; background: #fff; color: #000; padding: 8px 16px; border-radius: 2px; box-shadow: 4px 4px 0px #333; opacity: 0;
        }

        /* TIMELINE TEXT */
        .timeline-section {
            height: 300vh; 
            background-color: var(--bg-color);
            position: relative;
            z-index: 30; /* Above manga */
        }
        .timeline-sticky {
            position: sticky; top: 0; height: 100vh; display: flex; justify-content: center; align-items: center; text-align: center;
        }
        .text-slide { position: absolute; opacity: 0; width: 80%; max-width: 600px; }
        .text-slide h2 {
            font-family: "Playfair Display", serif; font-style: italic; font-weight: 400; font-size: 2.5rem; line-height: 1.4; color: #fff;
        }
        .highlight { color: #888; font-size: 1.2rem; font-family: "Montserrat", sans-serif; display: block; margin-top: 10px; text-transform: uppercase; letter-spacing: 3px; }

        /* --- CHAT MONTAGE STYLES (Dark Mode Adaptation) --- */
        .chat-montage-section {
            height: 2500vh; /* Long scroll for the phone scene */
            width: 100%;
            background-color: var(--bg-color);
            position: relative;
            z-index: 40;
        }

        .pin-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100vh;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
            /* pointer-events handled by GSAP/Structure */
        }

        .phone-mockup {
            /* Tailwind handles most, but specific overrides here */
            transform-origin: center 20%; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* Bubbles */
        .chat-bubble { max-width: 80%; position: relative; transform-origin: bottom center; will-change: transform, opacity; }
        
        .bubble-user {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white; border-radius: 18px 18px 4px 18px; align-self: flex-end;
            box-shadow: 0 2px 5px rgba(37, 99, 235, 0.2);
        }

        .bubble-receiver {
            background-color: #374151; /* Dark Gray for Dark Theme */
            color: #f3f4f6; /* Light Text */
            border-radius: 18px 18px 18px 4px; align-self: flex-start;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Typing Dots */
        .typing-dot { width: 6px; height: 6px; background-color: #9ca3af; border-radius: 50%; animation: bounce-dots 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce-dots { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        /* Call UI */
        .glass-panel { background: rgba(30, 30, 30, 0.85); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .call-screen {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: 50;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            padding: 60px 20px 40px; opacity: 0; pointer-events: none; overflow: hidden; transform: scale(0.9);
        }
        .call-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; z-index: -1; transition: opacity 0.5s ease; }
        
        .bg-scene-1 { background-image: url('./Artworks/CallView/1.jpg'); opacity: .5; }
        .bg-scene-2 { background-image: url('./Artworks/CallView/2.jpg'); opacity: .5;}
        .bg-scene-3 { background-image: url('./Artworks/CallView/3.jpg'); opacity: .5;}
        
        .call-btn { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; }
        
        @keyframes ripple { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }
        .rippling { animation: ripple 1.5s infinite; }
        
        .video-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.8) 100%); z-index: 0; }
        .memories-section {
            height: 500vh; /* Long scroll for the 3 statuses */
            background-color: #000;
            position: relative;
            z-index: 60;
        }

        .memories-sticky {
            position: sticky;
            top: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* The Initial Profile Trigger */
        .profile-trigger-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .memories-text {
            font-family: "Playfair Display", serif;
            font-size: 2rem;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
        }

        .profile-circle-wrapper {
            width: 150px;
            height: 150px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.8);
        }

        /* Animated Gradient Ring */
        .status-ring-svg {
            position: absolute;
            top: -5px; left: -5px;
            width: 160px; height: 160px;
            animation: spin 10s linear infinite;
        }
        
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .profile-img-inner {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #000; /* Gap between ring and image */
            position: relative;
            z-index: 2;
        }

        /* THE FULL SCREEN STATUS VIEWER */
        .status-viewer-overlay {
            position: absolute;
            inset: 0;
            background: #000;
            z-index: 20;
            opacity: 0;
            pointer-events: none; /* Initially allow clicks through */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* Status Backgrounds */
        .status-bg-layer {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        /* Using placeholders for statuses, replace with your own if needed */
        .status-1 { background-image: url('./Artworks/StatusView/Status1.jpg'); opacity: 1;}
        .status-2 { background-image: url('./Artworks/StatusView/Status2.jpg'); }
        .status-3 { background-image: url('./Artworks/StatusView/Status3.jpg'); }

        .status-gradient-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 15%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.8) 100%);
            z-index: 0;
        }

        /* Top Bar */
        .status-top-bar {
            padding: 15px;
            width: 100%;
            z-index: 30;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .progress-container {
            display: flex;
            gap: 5px;
            width: 100%;
        }

        .progress-bar-bg {
            flex: 1;
            height: 3px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background: #fff;
        }

        .status-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .header-avatar {
            width: 40px; height: 40px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.5); object-fit: cover; border-radius: 50%;
        }

        /* Bottom Caption */
        .status-bottom-bar {
            padding: 20px;
            padding-bottom: 40px;
            text-align: center;
            z-index: 30;
        }
        .status-caption {
            font-family: "Montserrat", sans-serif;
            font-size: 1.1rem;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            transform: translateY(10px);
            opacity: 0;
        }
        .final-section {
            height: 400vh; /* Scroll length for animations */
            background-color: var(--bg-color);
            position: relative;
            z-index: 70;
            display: flex;
        }

        .final-sticky {
            position: sticky;
            top: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .final-content-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            width: 100%;
        }

        .final-text {
            position: absolute;
            font-family: "Montserrat", sans-serif;
            font-size: 2rem;
            font-weight: 300;
            opacity: 0;
            text-align: center;
            width: 100%;
        }

        .love-container {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
        }

        .love-static {
            font-family: "Playfair Display", serif;
            font-size: 1.5rem;
            font-style: italic;
            color: #888;
            margin-bottom: 10px;
        }

        .names-text {
            position: absolute;
            top: 40px; /* Position below 'I love' */
            font-family: "Playfair Display", serif;
            font-size: 3rem;
            font-weight: 600;
            background: -webkit-linear-gradient(45deg, #fff, #aaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            white-space: nowrap;
        }
        
        .btw-text {
            font-family: "Comic Neue", cursive;
            font-size: 4rem;
            font-weight: bold;
        }
        #balloon-canvas-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; /* Behind text (10) but above bg */
            pointer-events: none;
            opacity: 1;
        }
        .wall-container {
    position: relative;
    width: 100%;       /* Changed from 100vw to fit container */
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 1000px; 
    overflow: hidden; 
    background-color: #050505; /* Background color ensured */
}

 /* --- VIGNETTE & BACKGROUND LAYERS --- */
        .vignette-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            /* Adaptive vignette: darker on edges */
            background: radial-gradient(circle at center, transparent 20%, rgba(5,5,5,0.8) 60%, #050505 95%);
        }

        /* The Grid of Moving Images */
        .grid-wrapper {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1vw; /* Responsive gap */
            
            /* Make grid larger than screen to cover rotation/movement */
            width: 150vw; 
            position: absolute;
            top: -25vh; 
            left: -25vw;
            
            z-index: 1;
            opacity: 0.5; 
            animation: scrollUp 60s linear infinite;
            will-change: transform; /* Performance optimization */
        }

        .grid-item {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            filter: grayscale(100%) contrast(120%) brightness(0.7);
            border-radius: 4px;
        }

        @keyframes scrollUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50%); }
        }

        /* --- CENTER CONTENT WRAPPER --- */
        .center-content-wrapper {
            position: absolute;
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%; /* Occupy full height to center properly */
            pointer-events: none;
            
            /* Smooth transition if screen resizes */
            transition: all 0.5s ease;
        }

        /* --- SVG CONTAINER --- */
        .center-svg-container {
            /* Responsive Width: Min 300px, Max 700px, otherwise 80% of screen width */
            width: clamp(300px, 80vw, 700px);
            height: auto;
            display: flex;
            justify-content: center;
        }

        .center-svg-container svg {
            width: 100%;
            height: auto;
            overflow: visible;
        }

        /* --- TEXT STYLING --- */
        .name-text {
            font-family: 'Dancing Script', cursive;
            
            /* Responsive Font: Min 3rem, Max 6rem, scales with Viewport Width (vw) */
            font-size: clamp(3rem, 10vw, 6rem);
            
            color: #ffffff;
            margin-top: -20px; /* Pull text slightly closer to SVG */
            opacity: 0;
            transform: translateY(20px);
            text-shadow: 2px 2px 15px rgba(0,0,0,1);
            position: relative;
            z-index: 22;
        }

        .center-svg-container svg path,
        .center-svg-container svg line,
        .center-svg-container svg polyline {
            stroke: #ffffff;
            stroke-width: 2px;
            fill-opacity: 0;
            stroke-linecap: round;
            stroke-linejoin: round;
            visibility: hidden; 
        }
        .mobile-overlay {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: auto; /* Maintain aspect ratio */
            object-fit: cover; /* Or 'contain' depending on image type */
            z-index: 1; /* Behind text (22) but in front of grid (1) */
            pointer-events: none;
            mask-image: linear-gradient(to top, black 80%, transparent 100%);
            -webkit-mask-image: linear-gradient(to top, black 80%, transparent 100%);
        }

        @media screen and (max-width: 1024px) {
            .grid-wrapper {
                width: 200vw; /* Make grid wider on narrow screens to hide edges */
                left: -50vw;
            }
        }

        /* Mobile Only */
        @media screen and (max-width: 768px) {
            
            .center-content-wrapper {
                /* Instead of negative pixels, we position the wrapper differently */
                justify-content: flex-start; 
                top: 55%; /* Start content at 55% down the screen */
                transform: translateY(-50%); /* Center strictly on that point */
                height: auto; /* Let it wrap content */
            }

            .name-text {
                margin-top: 10px;
                z-index: 2;
            }

            .mobile-overlay {
                position: absolute;
                display: block; /* Show overlay */
                z-index: 1;
            }
            
            /* Make the vignette stronger on mobile to improve readability */
            .vignette-overlay {
                background: radial-gradient(circle at center, transparent 10%, rgba(0,0,0,0.85) 50%, #000 90%);
            }
        }
    </style>
</head>
<body class="bg-[#050505]">

    <div class="intro-section">
        <div class="intro-content">
            <h1 class="intro-title">Hello Madam</h1>
            <p class="sub-text">Here is a small story for you</p>
            <span class="sub-text" >Created and Directed by <a href="https://www.instagram.com/axitra.fr/">@axitra.fr</a></span>
        </div>
        <div class="scroll-indicator">Keep Scrolling</div>
    </div>

    <div class="story-container">
        <div class="sticky-wrapper">
            <div class="manga-grid">
                <div class="panel p1"><img src="./Artworks/MangaView/Scene1.png" alt="Scene 1"></div>
                <div class="panel p2"><img src="./Artworks/MangaView/Scene2.png" alt="Scene 2"></div>
                <div class="panel p3"><img src="./Artworks/MangaView/Scene3.png" alt="Scene 3"></div>
                <div class="panel p4"><img src="./Artworks/MangaView/Scene4.png" alt="Scene 4"></div>
                <div class="panel p5"><img src="./Artworks/MangaView/Scene5.png" alt="Scene 5"></div>
                <div class="panel p6"><img src="./Artworks/MangaView/Scene6.png" alt="Scene 6"></div>
            </div>
            <div class="caption-area"><div class="caption-text"></div></div>
        </div>
    </div>

    <div class="timeline-section">
        <div class="timeline-sticky">
            <div class="text-slide t1">
                <h2>"It all starts June 2018<br>from the day we first met"</h2>
            </div>
            <div class="text-slide t2">
                <h2>"From chats..."</h2>
            </div>
        </div>
    </div>

    <div class="chat-montage-section" id="chat-section">
        <div class="pin-wrapper">
            <div class="phone-mockup w-full max-w-[360px] h-[750px] max-h-[90vh] bg-gray-900 rounded-[40px] overflow-hidden border-8 border-gray-800 relative flex flex-col scale-150">
                
                <div id="phone-header" class="bg-gray-900/90 backdrop-blur-sm border-b border-gray-800 p-4 pt-8 sticky top-0 z-20 flex items-center justify-between shadow-sm transition-transform duration-500">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold"><img src="./Artworks/profile.jpg" class="w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold" alt=""></div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-100">__thericha__</h3>
                            <p class="text-[10px] text-gray-400 leading-none status-text">Active now</p>
                        </div>
                    </div>
                    <div class="text-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m5 12 7-7 7 7"/><path d="M12 19V5"/></svg>
                    </div>
                </div>

                <div class="flex-1 p-4 overflow-hidden relative bg-gray-900">
                    <div id="content-wrapper" class="flex flex-col gap-3 pb-5">
                        <div class="text-center my-2 opacity-0 date-header translate-y-[10px]">
                            <span class="text-[10px] font-medium text-gray-500 uppercase tracking-wide">June 2018</span>
                        </div>

                        <div class="msg-group msg-slow-1 flex flex-col items-end opacity-0 translate-y-[20px]">
                            <div class="chat-bubble bubble-user px-4 py-2 text-sm">Hey! ami Aritra bolchi</div>
                        </div>

                        <div class="typing-1 opacity-0 hidden self-start">
                            <div class="chat-bubble bubble-receiver px-4 py-3 flex gap-1 w-16 justify-center items-center">
                                <div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>
                            </div>
                        </div>

                        <div class="msg-group msg-slow-2 flex flex-col items-start opacity-0 translate-y-[20px]">
                            <div class="chat-bubble bubble-receiver px-4 py-2 text-sm">hmm bol</div>
                        </div>
                        <div class="typing-1 opacity-0 hidden self-start">
                            <div class="chat-bubble bubble-receiver px-4 py-3 flex gap-1 w-16 justify-center items-center">
                                <div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>
                            </div>
                        </div>

                        <div class="msg-group msg-slow-2 flex flex-col items-start opacity-0 translate-y-[20px]">
                            <div class="chat-bubble bubble-receiver px-4 py-2 text-sm">ki ekta bolbi bolchilis amk</div>
                        </div>
                        
                        <div id="dynamic-messages-container" class="flex flex-col gap-3"></div>
                    </div>
                </div>

                <div id="incoming-call-popup" class="absolute top-4 left-4 right-4 glass-panel rounded-2xl p-4 shadow-xl z-30 translate-y-[-150%] opacity-0 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-purple-400 to-pink-500 flex items-center justify-center text-white text-sm font-bold">R</div>
                        <div>
                            <h3 class="text-sm font-bold text-white">Richa</h3>
                            <p class="text-xs text-gray-300">Incoming video call...</p>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="w-10 h-10 rounded-full bg-red-500 text-white flex items-center justify-center"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l2.19-2.03c.78-.72 1.9-.92 2.86-.55l5 1.93c1.04.4 1.73 1.44 1.73 2.56V21a2 2 0 0 1-2 2 18 18 0 0 1-18-18 2 2 0 0 1 2-2h3.19c1.12 0 2.16.69 2.56 1.73l1.93 5c.38.96.17 2.09-.55 2.86l-2.03 2.19z"/><line x1="23" y1="1" x2="1" y2="23"/></svg></button>
                        <button id="btn-accept-popup" class="w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center rippling"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg></button>
                    </div>
                </div>

                <div id="full-call-screen" class="call-screen">
                    <div class="call-bg bg-scene-1" id="bg-1"></div>
                    <div class="call-bg bg-scene-2" id="bg-2" style="opacity: 0"></div>
                    <div class="call-bg bg-scene-3" id="bg-3" style="opacity: 0"></div>
                    <div class="video-overlay"></div>

                    <div class="flex flex-col items-center mt-12 z-10 relative">
                        <div class="w-20 h-20 rounded-full bg-gradient-to-tr from-purple-400 to-pink-500 flex items-center justify-center text-white text-2xl font-bold mb-4 shadow-lg ring-2 ring-white/20">R</div>
                        <h2 class="text-2xl font-bold text-white mb-1 shadow-black drop-shadow-md">Richa</h2>
                        <p id="call-timer" class="text-white/90 text-lg font-mono tracking-widest font-semibold drop-shadow-md">00:00</p>
                    </div>

                    <div class="flex gap-6 mb-8 z-10 relative">
                        <div class="call-btn bg-white/20 hover:bg-white/30 backdrop-blur-md cursor-pointer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg></div>
                        <div class="call-btn bg-red-500 hover:bg-red-600 shadow-lg transform hover:scale-105"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l2.19-2.03c.78-.72 1.9-.92 2.86-.55l5 1.93c1.04.4 1.73 1.44 1.73 2.56V21a2 2 0 0 1-2 2 18 18 0 0 1-18-18 2 2 0 0 1 2-2h3.19c1.12 0 2.16.69 2.56 1.73l1.93 5c.38.96.17 2.09-.55 2.86l-2.03 2.19z"/><line x1="23" y1="1" x2="1" y2="23"/></svg></div>
                        <div class="call-btn bg-white/20 hover:bg-white/30 backdrop-blur-md cursor-pointer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 7 16 12 23 17 23 7z"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg></div>
                    </div>
                </div>

                <div id="phone-footer" class="p-3 border-t border-gray-800 bg-gray-900 flex gap-2 items-center z-20 relative transition-transform duration-500">
                    <div class="w-6 h-6 rounded-full bg-gray-700 flex-shrink-0"></div>
                    <div class="h-8 flex-1 bg-gray-800 rounded-full border border-gray-700"></div>
                    <div class="w-6 h-6 rounded-full bg-blue-600 flex-shrink-0"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="memories-section">
        <div class="memories-sticky">
            
            <div class="profile-trigger-container">
                <h2 class="memories-text">To Memories</h2>
                
                <div class="profile-circle-wrapper">
                    <svg class="status-ring-svg" viewBox="0 0 100 100">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#feda75;stop-opacity:1" />
                                <stop offset="25%" style="stop-color:#fa7e1e;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#d62976;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#962fbf;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="48" stroke="url(#grad1)" stroke-width="3" fill="none" />
                    </svg>
                    
                    <img src="./Artworks/Profile2.png" alt="Profile" class="profile-img-inner">
                </div>
            </div>

            <div class="status-viewer-overlay">
                
                <div class="status-bg-layer status-1"></div>
                <div class="status-bg-layer status-2"></div>
                <div class="status-bg-layer status-3"></div>
                <div class="status-gradient-overlay"></div>

                <div class="status-top-bar">
                    <div class="progress-container">
                        <div class="progress-bar-bg"><div class="progress-fill fill-1"></div></div>
                        <div class="progress-bar-bg"><div class="progress-fill fill-2"></div></div>
                        <div class="progress-bar-bg"><div class="progress-fill fill-3"></div></div>
                    </div>
                    <div class="status-header">
                        <img src="./Artworks/Profile2.png" alt="User" class="header-avatar">
                        <div class="flex flex-col">
                            <span class="text-white text-sm font-semibold">Memories</span>
                            <span class="text-gray-300 text-xs">Today, 10:23 PM</span>
                        </div>
                    </div>
                </div>

                <div class="status-bottom-bar">
                    <p class="status-caption cap-1">"I handed her my notebook, hoping my messy formulas weren't too embarrassing. It's just physics notes...."</p>
                    <p class="status-caption cap-2" style="display:none">"Slipping that poem between the pages of formulas..."</p>
                    <p class="status-caption cap-3" style="display:none">"She gave the notebook back with a normal smile, but the weight felt different. I opened it up, and suddenly... physics notebook became the most beautiful thing in the world."</p>
                </div>

            </div>

        </div>
    </div>

    <div class="final-section">
        <div class="final-sticky">
            <div class="final-content-wrapper">
                
                <h2 class="final-text" id="final-txt-1">Even now, years later, I sometimes catch myself nervously flipping through these old pages, hoping for a miracle. The guilt of losing her first words to me still sits heavy in my chest.</h2>
                
                <div class="love-container" id="final-txt-2">
                    <p class="love-static">I love you</p>
                    <div class="names-wrapper relative w-full h-[60px] flex justify-center items-center">
                        <h2 class="names-text" id="name-0">Senorita</h2>
                        <h2 class="names-text" id="name-1">Miss awahawai</h2>
                        <h2 class="names-text" id="name-2">__thericha__</h2>
                        <h2 class="names-text" id="name-3">Ayantika</h2>
                    </div>
                </div>

                <h2 class="final-text btw-text" id="final-txt-3">ooh BTW</h2>
                <div id="balloon-canvas-container" ></div>
            </div>
        </div>
    </div>

 <div class="wall-container">
    <div class="vignette-overlay"></div>

    <div class="center-content-wrapper">
        <div class="center-svg-container" id="svg-mount-point"></div>
        <span class="name-text">Richa</span>
    </div>
    
    <img src="./Artworks/overlay.png" alt="" class="mobile-overlay">
    
    <div class="grid-wrapper" id="grid"></div>
</div>


    <script type="module">

        import * as THREE from 'three';
        import { OBJLoader } from 'three/addons/loaders/OBJLoader.js';
        // --- 1. THREE.JS SETUP FOR BALLOONS ---
        const container = document.getElementById('balloon-canvas-container');
        const scene = new THREE.Scene();
        

        // Transparent camera setup
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 10;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.0);
        scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 2.0);
        dirLight.position.set(5, 10, 7);
        scene.add(dirLight);

        // Balloon Group
        let balloonGroup = new THREE.Group();
        scene.add(balloonGroup);
        // Initial Position: Hidden WAY below screen
        balloonGroup.position.y = -30; 

        // Load OBJ Model
        const loader = new OBJLoader();
        // NOTE: Ensure this path is correct relative to your HTML file
        loader.load('./Asset/13499_Balloon_Cluster_v1_L2.obj', (object) => {
            
            // Auto-Material script (Random aesthetic colors)
            const colors = [0xff0055, 0xffd700, 0xff69b4, 0xe91e63]; // Red, Gold, Pink, DarkPink
            let i = 0;
            
            object.traverse((child) => {
                if (child.isMesh) {
                    const color = colors[i % colors.length];
                    child.material = new THREE.MeshPhysicalMaterial({
                        color: color,
                        metalness: 0.6,
                        roughness: 0.2,
                        clearcoat: 1.0,
                        clearcoatRoughness: 0.1,
                        side: THREE.DoubleSide
                    });
                    i++;
                }
            });

            // Adjust Scale (Normalize based on common OBJ sizes)
            // You might need to tweak this number depending on your specific model export size
            object.scale.set(0.2, 0.2, 0.2); 
            object.rotation.x = -Math.PI / 2;
            // Center the pivot if needed
            const box = new THREE.Box3().setFromObject(object);
            const center = box.getCenter(new THREE.Vector3());
            object.position.sub(center); // Center geometry

            balloonGroup.add(object);
            
            // Subtle float animation
            gsap.to(object.rotation, {
                y: Math.PI * 0.2,
                duration: 5,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
        });

        // Resize Handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();

        // --- 1. SETUP LENIS (SMOOTH SCROLL) ---
        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            direction: 'vertical',
            smooth: true,
            smoothTouch: true
        });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // --- 2. GSAP REGISTRATION ---
        gsap.registerPlugin(ScrollTrigger);

        // --- 3. INTRO ANIMATION ---
        gsap.to(".intro-content, .scroll-indicator", {
            scrollTrigger: {
                trigger: ".intro-section",
                start: "top top",
                end: "bottom top",
                scrub: 1,
                pin: true
            },
            opacity: 0,
            y: -50,
            scale: 0.9
        });

        // --- 4. MANGA STORY ANIMATION ---
        const captions = ["Ugh... another hour of this monotone droning? My brain is officially turning to mush. Why did I even come today?", "[WHOOSH] The stagnant air in the classroom suddenly shifted. A presence arrived at the door.", "Huh? Who's interrupting now? Probably just another latecomer...", "Am I seeing things right?! My glasses aren't even on my eyes!", "Is that an actual angel taking a seat?", "Yep. I'm finished. Someone call a doctor... my heart just exploded."];
        const storyTl = gsap.timeline({
            scrollTrigger: { trigger: ".story-container", start: "top top", end: "bottom bottom", scrub: 0.5, pin: ".sticky-wrapper" }
        });
        storyTl.to(".manga-grid", { opacity: 1, scale: 1, duration: 1 });

        const panels = gsap.utils.toArray(".panel");
        const captionEl = document.querySelector(".caption-text");

        panels.forEach((panel, i) => {
            storyTl.to(panel, {
                opacity: 1, duration: 2,
                onStart: () => { updateStoryCaption(captions[i]); panel.classList.add('active'); },
                onReverseComplete: () => { 
                    if(i > 0) { updateStoryCaption(captions[i-1]); panels[i-1].classList.add('active'); } 
                    else { gsap.to(captionEl, {opacity: 0}); }
                    panel.classList.remove('active');
                }
            }, ">-0.5");
        });

        storyTl.to(".caption-area", { opacity: 0, duration: 1 }, "+=1");
        storyTl.to(".manga-grid", { scale: 0.4, opacity: 0, filter: "blur(10px)", duration: 4, ease: "power2.inOut" }, "<");

        function updateStoryCaption(text) {
            gsap.to(captionEl, {
                opacity: 0, y: 5, duration: 0.1,
                onComplete: () => {
                    captionEl.innerText = text;
                    gsap.to(captionEl, { opacity: 1, y: 0, duration: 0.2 });
                }
            });
        }

        // --- 5. TIMELINE TEXT ANIMATION ---
        const timelineTl = gsap.timeline({
            scrollTrigger: { trigger: ".timeline-section", start: "top top", end: "bottom bottom", scrub: 1, pin: ".timeline-sticky" }
        });
        timelineTl.to(".t1", { opacity: 1, y: 0, duration: 2 })
                  .to(".t1", { opacity: 0, y: -20, duration: 2 }, "+=1")
                  .to(".t2", { opacity: 1, y: 0, duration: 2 });


        // --- 6. CHAT MONTAGE ANIMATION ---
        
        // A. Setup Dynamic Content
        const fastMessages = [
            { s: 'user', t: 'mmm' }, { s: 'recv', t: 'kal ke bio pore asbi' },
            { s: 'user', t: 'hm hm porbo porbo' }, { s: 'user', t: 'Holi te colour lagali nh amr kache theke bol' }, { s: 'recv', t: ' areh nah nah serkm kichu nh sorry :(' }, { s: 'recv', t: 'bolna ki bolbi please' },
            { s: 'user', t: 'arh nh serkm kichu noyyy re' }, { s: 'recv', t: 'ðŸ˜’ Tui bolbi ki ? Last bar' },  { s: 'user', t: ' okh okh ðŸ˜• bolte ektu voy lgche ' }, { s: 'recv', t: 'bol taratari ' }, { s: 'user', t: ' I love you .... .........   ' },{ s: 'recv', t: 'thinking ---(what to say) ' },{ s: 'user', t: 'ki re kichu bol tension lagche ' }, { s: 'recv', t: 'areh vabchilam ki reply dbo er' },{ s: 'user', t: 'oto vabis nh jeta bolar bol Ami oto ekdm vabi ni' }, { s: 'recv', t: ' I love you toooo Aritra ' }, { s: 'user', t: 'sottie ?? ' }, { s: 'recv', t: '  Yes â˜ºï¸....but ei kotha tha .Khub i Top secret rakhis ' },{ s: 'recv', t: 'keu jate na jane ........' }, { s: 'user', t: 'dil garden garden ðŸ¡' }, { s: 'recv', t: 'bio porte ase amr pase bosbi' }, 
        ];
        const chatContainer = document.getElementById('dynamic-messages-container');
        fastMessages.forEach((msg, i) => {
            const div = document.createElement('div');
            div.className = `msg-dynamic msg-dyn-${i} flex flex-col ${msg.s === 'user' ? 'items-end' : 'items-start'} opacity-0 translate-y-[20px]`;
            div.innerHTML = `<div class="chat-bubble ${msg.s === 'user' ? 'bubble-user' : 'bubble-receiver'} px-4 py-2 text-sm">${msg.t}</div>`;
            chatContainer.appendChild(div);
        });

        // B. Chat Montage Timeline
        const chatTl = gsap.timeline({
            scrollTrigger: {
                trigger: ".chat-montage-section",
                start: "top top",
                end: "bottom bottom",
                scrub: 1,
                pin: ".pin-wrapper",
            }
        });

        // Zoom Logic: Start zoomed in (scale 2) then zoom to 1
        chatTl.fromTo(".phone-mockup", 
            { scale: 2.0 }, 
            { scale: 1.0, duration: 5, ease: "power2.inOut" }
        , "start");

        // Chat Sequence (Happens while zooming out partially)
        chatTl.to(".date-header", { opacity: 1, y: 0, duration: 1 }, "start+=0.5");
        chatTl.to(".msg-slow-1", { opacity: 1, y: 0, duration: 1, ease: "power2.out" });
        chatTl.set(".typing-1", { display: "flex" }).to(".typing-1", { opacity: 1, duration: 0.5 }).to(".status-text", { text: "Typing...", duration: 0.1 }, "<");
        chatTl.to({}, { duration: 1.5 }); // Wait for typing
        chatTl.to(".typing-1", { opacity: 0, duration: 0.2 }).set(".typing-1", { display: "none" }).to(".status-text", { text: "Online", duration: 0.1 }, "<")
              .to(".msg-slow-2", { opacity: 1, y: 0, duration: 0.8, ease: "back.out(1.2)" });

        // Fast Messages
        let slideUpAccumulator = 0;
        const SLIDE_PER_MSG = 45; 
        fastMessages.forEach((msg, i) => {
            let duration = Math.max(0.1, 0.4 * Math.pow(0.92, i)); 
            chatTl.to(`.msg-dyn-${i}`, { opacity: 1, y: 0, duration: duration, ease: "power1.out" });
            if (i > 2) {
                slideUpAccumulator -= SLIDE_PER_MSG;
                chatTl.to("#content-wrapper", { y: slideUpAccumulator, duration: duration, ease: "power1.out" }, "<"); 
            }
        });

        // Incoming Call Popup
        chatTl.to("#incoming-call-popup", { y: 0, opacity: 1, duration: 1, ease: "elastic.out(1, 0.6)" });
        chatTl.to({}, { duration: 2 }); // Wait
        chatTl.to("#btn-accept-popup", { scale: 0.8, duration: 0.2, ease: "power1.in" }); 
        chatTl.to("#btn-accept-popup", { scale: 1.2, duration: 0.2, ease: "power1.out" });

        // Transition to Full Screen Call
        const transitionLabel = "callTransition";
        chatTl.addLabel(transitionLabel);
        chatTl.to("#incoming-call-popup", { opacity: 0, scale: 0.8, duration: 0.3 }, transitionLabel);
        chatTl.to("#phone-header", { y: -100, duration: 0.5 }, transitionLabel);
        chatTl.to("#phone-footer", { y: 100, duration: 0.5 }, transitionLabel);
        chatTl.to("#content-wrapper", { opacity: 0, duration: 0.5 }, transitionLabel);
        chatTl.to("#full-call-screen", { opacity: 1, scale: 1, duration: 0.8, ease: "circ.out" }, transitionLabel);

        // Montage / Timer Logic
        const timerObj = { val: 0 };
        const timerEl = document.getElementById("call-timer");
        const updateTimer = () => {
            const minutes = Math.floor(timerObj.val / 60);
            const seconds = Math.floor(timerObj.val % 60);
            timerEl.innerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        };

        // Scene 1
        chatTl.to(timerObj, { val: 120, duration: 2, ease: "none", onUpdate: updateTimer });

        // Scene 2 (Change BG)
        const scene2Label = "scene2";
        chatTl.addLabel(scene2Label);
        chatTl.to("#bg-1", { opacity: 0, duration: 1 }, scene2Label);
        chatTl.to("#bg-2", { opacity: 1, duration: 1 }, scene2Label);
        chatTl.to(timerObj, { val: 850, duration: 1, ease: "none", onUpdate: updateTimer }); // Time jump

        // Scene 3 (Night)
        const scene3Label = "scene3";
        chatTl.addLabel(scene3Label);
        chatTl.to("#bg-2", { opacity: 0, duration: 1 }, scene3Label);
        chatTl.to("#bg-3", { opacity: 1, duration: 1 }, scene3Label);
        chatTl.to(timerObj, { val: 1805, duration: 1, ease: "none", onUpdate: updateTimer }); // Big time jump

        chatTl.to({}, { duration: 2 }); // Hold end state

        let memTl = gsap.timeline({
            scrollTrigger: {
                trigger: ".memories-section",
                start: "top top",
                end: "bottom bottom",
                scrub: 0.5,
                pin: ".memories-sticky"
            }
        });

        // 1. Reveal "To Memories" and Profile Ring
        memTl.to(".memories-text", { opacity: 1, y: 0, duration: 2 });
        memTl.to(".profile-circle-wrapper", { opacity: 1, scale: 1, duration: 2 }, "<");
        
        // 2. Pause briefly to admire the ring
        memTl.to({}, { duration: 1 });

        // 3. THE ZOOM TRANSITION (Into Status View)
        // Move text out
        memTl.to(".memories-text", { opacity: 0, y: -20, duration: 1 });
        
        // Massive Scale of profile container to simulate "entering" it
        memTl.to(".profile-trigger-container", { 
            scale: 30, 
            duration: 4, 
            ease: "power2.in" 
        }, "<");
        
        // Fade in the Status Overlay simultaneously (cross-fade)
        memTl.to(".status-viewer-overlay", { 
            opacity: 1, 
            duration: 2,
            pointerEvents: "auto"
        }, "-=2"); // Start fade slightly before zoom ends

        // 4. PLAY STATUSES (Timeline within timeline)
        
        // Status 1 is already visible by CSS default.
        // Fill Bar 1
        memTl.to(".fill-1", { width: "100%", duration: 3, ease: "none" });
        memTl.to(".cap-1", { opacity: 1, y: 0, duration: 0.5 }, "<"); // Show caption 1
        
        // Transition 1 -> 2
        memTl.to(".status-1", { opacity: 0, duration: 0.5 });
        memTl.to(".status-2", { opacity: 1, duration: 0.5 }, "<");
        memTl.to(".cap-1", { display: "none", opacity: 0, duration: 0 }); // Hide cap 1
        memTl.set(".cap-2", { display: "block" });
        memTl.to(".cap-2", { opacity: 1, y: 0, duration: 0.5 });
        
        // Fill Bar 2
        memTl.to(".fill-2", { width: "100%", duration: 3, ease: "none" });

        // Transition 2 -> 3
        memTl.to(".status-2", { opacity: 0, duration: 0.5 });
        memTl.to(".status-3", { opacity: 1, duration: 0.5 }, "<");
        memTl.to(".cap-2", { display: "none", opacity: 0, duration: 0 }); // Hide cap 2
        memTl.set(".cap-3", { display: "block" });
        memTl.to(".cap-3", { opacity: 1, y: 0, duration: 0.5 });

        // Fill Bar 3
        memTl.to(".fill-3", { width: "100%", duration: 3, ease: "none" });

        // End Hold
        memTl.to({}, { duration: 2 });
        // --- 6. FINAL MESSAGE ANIMATION ---
        
        const finalTl = gsap.timeline({
            scrollTrigger: {
                trigger: ".final-section",
                start: "top top",
                end: "bottom bottom",
                scrub: 1,
                pin: ".final-sticky"
            }
        });
        // 1. "One more thing"
        // Enter from down
        finalTl.fromTo("#final-txt-1", 
            { y: 100, opacity: 0 }, 
            { y: 0, opacity: 1, duration: 2, ease: "power2.out" }
        );
        // Hold
        finalTl.to({}, { duration: 1 });
        // Exit up
        finalTl.to("#final-txt-1", { y: -100, opacity: 0, duration: 2, ease: "power2.in" });

        // 2. "I Love" Container Enters
        finalTl.fromTo("#final-txt-2", 
            { opacity: 0 },
            { opacity: 1, duration: 2 }
        );

        // 3. Name Cycle Loop
        // Logic: Name enters from down -> Hold -> Name exits up -> Next Name enters
        const names = ["#name-0", "#name-1", "#name-2", "#name-3"];
        
        names.forEach((name, i) => {
            // Enter
            finalTl.fromTo(name, 
                { y: 50, opacity: 0 },
                { y: 0, opacity: 1, duration: 1.5, ease: "power2.out" }
            );
            
            // Hold
            finalTl.to({}, { duration: 1.5 });
            
            // Exit (if it's not the very last thing, or even if it is, usually looks better to leave clean)
            finalTl.to(name, { y: -50, opacity: 0, duration: 1.5, ease: "power2.in" });
        });

        // Exit "I Love" text container
        finalTl.to("#final-txt-2", { opacity: 0, duration: 1 });

        // 4. "ooh BTW"
        finalTl.fromTo("#final-txt-3", 
            { scale: 0.5, opacity: 0, rotate: -10 },
            { scale: 1, opacity: 1, rotate: 0, duration: 2, ease: "elastic.out(1, 0.5)" }
        );
        
        // 3. BALLOONS RISE
        // Triggering the Three.js object position via GSAP
        // Position y: 0 is roughly center screen in Three.js terms with this camera setup
        finalTl.to(balloonGroup.position, {
            y: 0, 
            duration: 6,
            ease: "power2.out"
        }, "+=0.5"); // Start shortly after text appears

        // Hold at end
        finalTl.to({}, { duration: 3 });
        // =========================================
    // PART 1: GRID BACKGROUND SETUP
    // =========================================
    // MAKE SURE THESE PATHS MATCH YOUR FOLDER STRUCTURE
    const folderPath = "Artworks/PhotoGrids/"; 
    const totalImages = 31; 
    const columns = 6;      
    const rowsToGenerate = 15; 
    const gridContainer = document.getElementById('grid');

    // Prepare file list
    let imageList = [];
    for (let i = 1; i <= totalImages; i++) {
        // Assuming files are named "0 (1).jpg", etc.
        imageList.push(`0 (${i}).jpg`); 
    }

    function createGrid() {
        // Generate double the rows for seamless looping
        if(gridContainer) { // Safety check
            for (let i = 0; i < (columns * rowsToGenerate * 2); i++) {
                const img = document.createElement('img');
                const src = imageList[Math.floor(Math.random() * imageList.length)];
                img.src = `${folderPath}${src}`;
                img.className = 'grid-item';
                img.loading = "lazy"; 
                img.onerror = function() { this.style.visibility = 'hidden'; };
                gridContainer.appendChild(img);
            }
        }
    }
    createGrid();

    // =========================================
    // PART 2: SVG HANDWRITTEN ANIMATION
    // =========================================
    const svgMountPoint = document.getElementById('svg-mount-point');
    const svgPath = 'Artworks/HBD.svg'; // Check this path

    // Only run if the container exists
    if(svgMountPoint) {
        fetch(svgPath)
            .then(response => response.text())
            .then(svgContent => {
                svgMountPoint.innerHTML = svgContent;
                
                // OPTIONAL: Use ScrollTrigger so it writes when you scroll to it
                // Instead of setTimeout, we use GSAP ScrollTrigger
                ScrollTrigger.create({
                    trigger: ".wall-container",
                    start: "top center", // Starts when top of wall hits center of screen
                    onEnter: () => animateHandwriting()
                });
            })
            .catch(error => console.error("Error loading SVG:", error));
    }

    function animateHandwriting() {
        const paths = document.querySelectorAll('.center-svg-container svg path, .center-svg-container svg line, .center-svg-container svg polyline');
        const nameText = document.querySelector('.name-text');

        if (paths.length === 0) return;

        gsap.set(paths, { visibility: "visible" });

        const tl = gsap.timeline({ defaults: { ease: "power3.inOut" } });

        // 1. Draw Outlines
        paths.forEach((path, i) => {
            const length = path.getTotalLength();
            gsap.set(path, { strokeDasharray: length, strokeDashoffset: length });
            tl.to(path, { strokeDashoffset: 0, duration: 1.5 }, i * 0.05); 
        });

        // 2. Fade in SVG Colors
        tl.to(paths, {
            fillOpacity: 1,
            strokeOpacity: 0, 
            duration: 1,
            ease: "power2.out"
        }, "-=1");

        // 3. Animate Name
        tl.to(nameText, {
            opacity: 1,       
            y: 0,             
            duration: 1.2,
            ease: "back.out(1.7)" 
        }, "-=1.2"); 
    }
    </script>
</body>
</html>